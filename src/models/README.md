taking code out of ipynbs and setting it up to run end to end with unit tests
